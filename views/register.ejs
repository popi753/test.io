<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>register</title>
    
    <link rel="stylesheet" href="./stylesheets/style.css">
    <style>

body { 
    min-width: 100vw;
    min-height: 100vh;
    background: url("./images/karl-paul-baldacchino-CSZ1Xk0KizQ-unsplash.jpg") no-repeat center center fixed; 
    background-size: cover;
    display: flex;
    justify-content: center;
    align-items: center;
    
  
  }

    </style>
</head>
<body>
    <div id="registerbox">
        <form action="/register" onsubmit="return func()" method="post">
            <div id="register">
                <a id="registersvg" href="..">
                    <svg  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M160 416H96c-17.67 0-32-14.33-32-32V128c0-17.67 14.33-32 32-32h64c17.67 0 32-14.33 32-32S177.7 32 160 32H96C42.98 32 0 74.98 0 128v256c0 53.02 42.98 96 96 96h64c17.67 0 32-14.33 32-32S177.7 416 160 416zM502.6 233.4l-128-128c-12.51-12.51-32.76-12.49-45.25 0c-12.5 12.5-12.5 32.75 0 45.25L402.8 224H192C174.3 224 160 238.3 160 256s14.31 32 32 32h210.8l-73.38 73.38c-12.5 12.5-12.5 32.75 0 45.25s32.75 12.5 45.25 0l128-128C515.1 266.1 515.1 245.9 502.6 233.4z"/></svg>
                </a>
                <h1>Registration</h1>

                <div class="registerboxes">
                    <input 
                   <% if(locals.someerr){ %>
                    value=<%=username%>
                    <% } %>

                    type="text" id="Rusername" name="Rusername" placeholder="enter username" required>
                <br>    <label for="Rusername" id="Rusernamelabel" class="Rlabel">
                    
                    <% if (locals.someerr == 11000) { %>
                            მომხმარებელი უკვე არსებობს
                            <% } %>
                    
                </label>
                </div>

                <div class="registerboxes">
                    <input
                    <% if(locals.someerr) { %>
                        value=<%=password%>
                        <% } %>
                    type="password" id="Rpassword" name="Rpassword" placeholder="enter password" required>
                <br>    <label for="Rpassword" id="Rpasswordlabel" class="Rlabel"></label>
                </div>

                   
                

                <button type="submit" id="registerbtn">register</button>
                <a id="Rlogin" href="/login">have an account</a>
            </div>
            
        </form>



    </div>


    








<script>
const Pinput = document.getElementById("Rpassword")

Pinput.addEventListener("input", ()=>{
    Pinput.type = "text"
})

Pinput.addEventListener("focusin", ()=>{
    Pinput.type = "text"
})

Pinput.addEventListener("focusout", ()=>{
    Pinput.type = "password"
})


Pinput.addEventListener("mouseover", ()=>{
    Pinput.type = "text"
})

Pinput.addEventListener("mouseout", ()=>{
    Pinput.type = "password"
})



function func() {

    if (document.getElementById("Rusername").value.length<4 && document.getElementById("Rpassword").value.length<8) {
        document.getElementById("Rusernamelabel").textContent = "4-ზე ნაკლები არ მოსულა"
        document.getElementById("Rpasswordlabel").textContent = "8-ზე ნაკლები არ მოსულა"
        return false
    }
    else if (document.getElementById("Rusername").value.length<4) {
                            if (!(document.getElementById("Rpassword").value.length<8)) {
                                document.getElementById("Rusernamelabel").textContent = "4-ზე ნაკლები არ მოსულა"
                                document.getElementById("Rpasswordlabel").textContent = ""
                                return false
                            }
        document.getElementById("Rusernamelabel").textContent = "4-ზე ნაკლები არ მოსულა"
        return false
    }
    else if (document.getElementById("Rpassword").value.length<8) {
                            if (!(document.getElementById("Rusername").value.length<4)) {
                                document.getElementById("Rpasswordlabel").textContent = "8-ზე ნაკლები არ მოსულა"
                                document.getElementById("Rusernamelabel").textContent = ""
                                return false
                            }
        document.getElementById("Rpasswordlabel").textContent = "8-ზე ნაკლები არ მოსულა"
        return false
    }
    else{
        return true
    }
}




</script>

    
</body>
</html>